<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>First Steps with TileDB</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
  <style type="text/css">@charset "UTF-8";body{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;line-height:1.4;max-width:800px;margin:20px auto;padding:0 10px;color:#363636;background:#fff;text-rendering:optimizeLegibility}button,input,textarea{transition:background-color .1s linear,border-color .1s linear,color .1s linear,box-shadow .1s linear,transform .1s ease}h1{font-size:2.2em;margin-top:0}h1,h2,h3,h4,h5,h6{margin-bottom:12px}h1,h2,h3,h4,h5,h6,strong{color:#000}b,h1,h2,h3,h4,h5,h6,strong,th{font-weight:600}blockquote{border-left:4px solid rgba(0,150,191,.67);margin:1.5em 0;padding:.5em 1em;font-style:italic}blockquote>footer{margin-top:10px;font-style:normal}address,blockquote cite{font-style:normal}a[href^=mailto]:before{content:"üìß "}a[href^=tel]:before{content:"üìû "}a[href^=sms]:before{content:"üí¨ "}button,input[type=button],input[type=checkbox],input[type=submit]{cursor:pointer}input:not([type=checkbox]):not([type=radio]),select{display:block}button,input,select,textarea{color:#000;background-color:#efefef;font-family:inherit;font-size:inherit;margin-right:6px;margin-bottom:6px;padding:10px;border:none;border-radius:6px;outline:none}button,input:not([type=checkbox]):not([type=radio]),select,textarea{-webkit-appearance:none}textarea{margin-right:0;width:100%;box-sizing:border-box;resize:vertical}button,input[type=button],input[type=submit]{padding-right:30px;padding-left:30px}button:hover,input[type=button]:hover,input[type=submit]:hover{background:#ddd}button:focus,input:focus,select:focus,textarea:focus{box-shadow:0 0 0 2px rgba(0,150,191,.67)}button:active,input[type=button]:active,input[type=checkbox]:active,input[type=radio]:active,input[type=submit]:active{transform:translateY(2px)}button:disabled,input:disabled,select:disabled,textarea:disabled{cursor:not-allowed;opacity:.5}::-webkit-input-placeholder{color:#949494}:-ms-input-placeholder{color:#949494}::-ms-input-placeholder{color:#949494}::placeholder{color:#949494}a{text-decoration:none;color:#0076d1}a:hover{text-decoration:underline}code,kbd{background:#efefef;color:#000;padding:5px;border-radius:6px}pre>code{padding:10px;display:block;overflow-x:auto}img{max-width:100%}hr{border:none;border-top:1px solid #dbdbdb}table{border-collapse:collapse;margin-bottom:10px;width:100%}td,th{padding:6px;text-align:left}th{border-bottom:1px solid #dbdbdb}tbody tr:nth-child(2n){background-color:#efefef}::-webkit-scrollbar{height:10px;width:10px}::-webkit-scrollbar-track{background:#efefef;border-radius:6px}::-webkit-scrollbar-thumb{background:#d5d5d5;border-radius:6px}::-webkit-scrollbar-thumb:hover{background:#c4c4c4}

</style>
  <style type="text/css">
code {
padding: 2px;
border-radius: unset;
}

pre {
background-color: unset;
border: solid #aaa 1px;
padding: 8px;
}
pre.numberSource {
margin: 0;
padding-left: 0;
}
div.sourceCode {
overflow: visible;
}
pre, pre.sourceCode {
overflow-x: auto;
}
pre>code {
white-space: pre;
overflow: visible;
background-color: unset;
padding: 0;
}
pre.sourceCode.numberSource {
overflow-x: visible;
}
pre.sourceCode.numberSource>code {
white-space: pre-wrap
}
pre.sourceCode.numberSource>code>span {
left: 8px;
text-indent: -4.6em;
}

.chunk-summary {
text-align: right;
}
.chunk-summary+pre,
.chunk-summary+div.sourceCode {
margin-top: 2px;
}

nav > ul {
border: .0625rem solid #444;
border-radius: 4px;
margin: 5px;
padding: 5px;
}
nav ul {
list-style-type: none;
padding-inline-start: 1rem;
}
nav ul li {
padding: 0;
}
nav ul ul {
margin-top: 0;
margin-bottom: 0;
padding-top: 0;
padding-bottom: 0;
}
nav code {
background-color: unset;
color: unset;
}
</style>
  <style type="text/css">@media screen and (max-width: 960px) {
header, nav, article {
padding: 0 3rem;
}
}
#TOC {
font-size: 0.9em;
border: none;
}
#TOC > ul {
box-sizing: border-box;
}
#TOC ul {
margin: 0;
}
#TOC li, #TOC a {
margin: 0;
padding: 0;
}
</style>
  <style type="text/css">.tooltip {
position: relative;
display: inline-block;
}
.tooltip:before, .tooltip:after {
position: absolute;
opacity: 0;
clip: rect(0 0 0 0);
-webkit-clip-path: inset(100%);
clip-path: inset(100%);
transition: all 0.3s;
z-index: 1010;
left: 50%;
}
.tooltip:not(.bottom):before, .tooltip:not(.bottom):after {
bottom: 75%;
}
.tooltip.bottom:before, .tooltip.bottom:after {
top: 75%;
}
.tooltip:hover:before, .tooltip:hover:after, .tooltip:focus:before, .tooltip:focus:after {
opacity: 1;
clip: auto;
-webkit-clip-path: inset(0%);
clip-path: inset(0%);
}
.tooltip:before {
content: '';
background: transparent;
border: 0.5rem solid transparent;
left: calc(50% - 0.5rem);
}
.tooltip:not(.bottom):before {
border-top-color: #212121;
}
.tooltip.bottom:before {
border-bottom-color: #212121;
}
.tooltip:after {
content: attr(aria-label);
color: #fafafa;
background: #212121;
border-radius: 0.125rem;
padding: 0.5rem;
white-space: nowrap;
transform: translateX(-50%);
}
.tooltip:not(.bottom):after {
margin-bottom: 1rem;
}
.tooltip.bottom:after {
margin-top: 1rem;
}
</style>
  <style type="text/css">:root {
--toc-width: 300px;
}
@media screen and (min-width: 960px) {
body {
max-width: 100vw;
margin: 0;
padding: 0;
}
main {
display: grid;
grid-template-columns: var(--toc-width) 1fr;
grid-template-rows: auto auto;
}
#TOC {
grid-row: 1 / -1;
grid-column: 1 / 2;
border: none;
margin: 0;
width: var(--toc-width);
}
#TOC > ul {
padding-top: 0;
padding-bottom: 0;
position: sticky;
max-height: 100vh;
overflow-y: auto;
top: 0;
border: none;
}
#TOC > ul > li:first-child {
padding-top: 0.5rem;
}
}
@media screen and (min-width: 960px) and (max-width: 1260px) {
main {
width: calc(100vw - 2rem);
}
header, article {
width: calc(100vw - var(--toc-width) - 6rem);
padding: 0 0 0 4rem;
}
}
@media screen and (min-width: 1260px) {
main {
width: calc(1260px - 2rem);
margin: 0 calc(50vw - 480px) 0 auto;
}
header, article {
width: calc(960px - 6rem);
padding: 0 0 0 4rem;
}
}
</style>
  <script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous" data-external="1">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous" data-external="1"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);" data-external="1"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false}
        ],
        displayMode: true
      });
    });
  </script>
</head>
<body>
<main>
<header id="title-block-header">
<h1 class="title">First Steps with TileDB</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#dense-arrays">Dense Arrays</a>
<ul>
<li><a href="#preliminaries">Preliminaries</a></li>
<li><a href="#basic-reading-of-dense-arrays">Basic Reading of Dense Arrays</a></li>
<li><a href="#read-2-d-with-attribute-selection">Read 2-D with attribute selection</a></li>
</ul></li>
<li><a href="#sparse-arrays">Sparse Arrays</a>
<ul>
<li><a href="#basic-reading-and-writing-of-sparse-arrays">Basic Reading and Writing of Sparse Arrays</a></li>
<li><a href="#datetime-attributes">Date(time) Attributes</a></li>
</ul></li>
<li><a href="#additional-information">Additional Information</a></li>
</ul>
</nav>
<article>
<p>This document introduces TileDB via several simple examples. A corresponding document with more complete <a href="documentation.html">API documentation</a> is also available.</p>
<section id="getting-started" class="level1">
<h1>Getting started</h1>
<p>Once the TileDB R package is installed, it can be loaded via <code>library(tiledb)</code>. Installation is supported for Windows, Linux and macOS via the <a href="https://cran.r-project.org/package=tiledb">official CRAN package</a>, on Linux and macOS via the <a href="https://anaconda.org/conda-forge">conda</a> package as well as from source.</p>
<p>Documentation for the TileDB R package is available via the <code>help()</code> function from within R as well as via the <a href="https://tiledb-inc.github.io/TileDB-R/">package documentation</a> and an [introductory notebook][tiledb_notebook]. Documentation about TileDB itself is <a href="https://docs.tiledb.com/main/">also available</a>.</p>
<p>Several ‚Äúquickstart‚Äù examples that are discussed on the website are available in the <a href="https://github.com/TileDB-Inc/TileDB-R/tree/master/inst/examples">examples</a> directory. This vignette discusses similar examples.</p>
<p>In the following examples, the URIs describing arrays point to local file system object. When TileDB has been built with S3 support, and with proper AWS credentials in the usual environment variables, URIs such as <code>s3://some/data/bucket</code> can be used where a local file would be used. See the script <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/ex_S3.R">ex_S3.R</a> for an example.</p>
</section>
<section id="dense-arrays" class="level1">
<h1>Dense Arrays</h1>
<section id="preliminaries" class="level2">
<h2>Preliminaries</h2>
<p>These illustrations use the array created by the file <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/ex_1.R">ex_1.R</a> which one can run from within R, or on the command-line. To follow along with discussion that follows, it helps to run the example once to create the array after possibly adjusting the array location path from its default value (using the current directory or, if set as an option, an override).</p>
</section>
<section id="basic-reading-of-dense-arrays" class="level2">
<h2>Basic Reading of Dense Arrays</h2>
<p>The file <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/ex_1.R">ex_1.R</a> in the examples directory is a simple yet complete example extending <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/quickstart_dense.R">quickstart_dense.R</a> by adding a second and third attribute. In this as well as the following examples we will use <code>tiledb_array()</code> to access the array; the older variants <code>tiledb_dense()</code> and <code>tiledb_sparse()</code> remain supported but are deprecated and may be removed at some point in the future.</p>
<p><em>Read 1-D</em></p>
<p>The first example extracts rows 1 to 2 and column 2 from an array. It also limits the selection to just one attribute (via <code>attrs</code>), asks for the return to be a <code>data.frame</code> (instead of a simpler list) and for the (row and column, if present as here) indices to not be printed (via <code>extended=FALSE</code>).</p>
<pre><code>&gt; A &lt;- tiledb_array(uri = uri, attrs = &quot;b&quot;,
+                   as.data.frame=TRUE, extended=FALSE))
&gt; A[1:2,2]
[1] 101.5 104.0
&gt;</code></pre>
<p>Note that the examples create three two-dimensional attributes. The attributes can be selected via the <code>attrs</code> argument, or the <code>attrs()</code> method on the array object. The square-bracket indexing then selects with in the 2-d attribute object.</p>
<p>If multiple objects are returned (as <code>list</code> or <code>data.frame</code>), subsetting on the returned object works via <code>[[var]]</code> or <code>$var</code>. A numeric index also works (but needs to account for <code>rows</code> and <code>cols</code>).</p>
<pre><code>&gt; A &lt;- tiledb_array(uri = uri, attrs = c(&quot;a&quot;,&quot;b&quot;),
+                   as.data.frame = TRUE)
&gt; A[1:2,2][[&quot;a&quot;]]
[1] 2 7
&gt; A[1:2,2]$a
[1] 2 7
&gt;</code></pre>
<p><em>Read 2-D</em></p>
<p>This works analogously. Note that the results are generally returned as vectors, or as a columns of a <code>data.frame</code> object in case that option was set.</p>
<pre><code>&gt; A[6:9,3:4]
$a
[1] 28 29 33 34 38 39 43 44

$b
[1] 114.5 115.0 117.0 117.5 119.5 120.0 122.0 122.5

$c
[1] &quot;fox&quot; &quot;A&quot;   &quot;E&quot;   &quot;F&quot;   &quot;J&quot;   &quot;K&quot;   &quot;O&quot;   &quot;P&quot;
&gt;</code></pre>
</section>
<section id="read-2-d-with-attribute-selection" class="level2">
<h2>Read 2-D with attribute selection</h2>
<p>We can restrict the selection to a subset of attributes when opening the array.</p>
<pre><code>&gt; A &lt;- tiledb_dense(uri = uri, attrs = c(&quot;b&quot;,&quot;c&quot;),
+                   as.data.frame = TRUE, extended=FALSE)
&gt; A[6:9,2:4]
       b     c
1  114.0 brown
2  114.5   fox
3  115.0     A
4  116.5     D
5  117.0     E
6  117.5     F
7  119.0     I
8  119.5     J
9  120.0     K
10 121.5     N
11 122.0     O
12 122.5     P
&gt;</code></pre>
<p>This also illustrated the effect of setting <code>as.data.frame=TRUE</code> when opening the array.</p>
<p>This scheme can be generalized to variable cells, or cells where N&gt;1, as we can expand each (atomistic) value over corresponding row and column indices.</p>
<p>The column types correspond to the attribute typed in the array schema, subject to the constraint mentioned above on R types. (The char comes in as a factor variable as is still the R 3.6.* default which is about to change. We can also override, users can too.)</p>
<pre><code>&gt; A &lt;- tiledb_array(&quot;/tmp/tiledb/ex_1/&quot;, attrs=c(&quot;b&quot;,&quot;c&quot;),
+                   as.data.frame = TRUE, extended=TRUE)
&gt; sapply(A[6:9, 3:4], &quot;class&quot;)
       rows        cols           b           c
  &quot;integer&quot;   &quot;integer&quot;   &quot;numeric&quot; &quot;character&quot;
&gt;</code></pre>
<p>Consistent with the <code>data.frame</code> semantics, <em>now</em> requesting a named column <em>reduces to a vector</em> as this happens at the R side:</p>
<pre><code>&gt; A[6:9, 3:4]$b
[1] 114.5 115.0 117.0 117.5 119.5 120.0 122.0 122.5
&gt;</code></pre>
</section>
</section>
<section id="sparse-arrays" class="level1">
<h1>Sparse Arrays</h1>
<section id="basic-reading-and-writing-of-sparse-arrays" class="level2">
<h2>Basic Reading and Writing of Sparse Arrays</h2>
<p><em>Simple Examples</em></p>
<p>Basic reading returns the coordinates and any attributes. The following examples use the array created by the <a href="https://github.com/TileDB-Inc/TileDB/blob/dev/examples/cpp_api/quickstart_sparse.cc">quickstart_sparse</a> example.</p>
<pre><code>&gt; A &lt;- tiledb_array(uri = uri, is.sparse = TRUE)
&gt; A[]
$rows
[1] 1 2 2

$cols
[1] 1 3 4

$a
[1] 1 3 2

&gt;</code></pre>
<p>We can also request a <code>data.frame</code> object, either when opening or by changing this object characteristic on the fly:</p>
<pre><code>&gt; return.data.frame(A) &lt;- TRUE
&gt; A[]
  a rows cols
1 1    1    1
2 3    2    3
3 2    2    4</code></pre>
<p>For sparse arrays, the return type is by default ‚Äòextended‚Äô showing rows and column but this can be overridden.</p>
<p>Assignment works similarly:</p>
<pre><code>&gt; A[4,2] &lt;- 42L
&gt; A[]
&gt; A[]
  rows cols  a
1    1    1  1
2    2    3  3
3    2    4  2
4    4    2 42
&gt;</code></pre>
<p>Reads can select rows and or columns:</p>
<pre><code>&gt; A[2,]
  rows cols a
1    2    3 3
2    2    4 2
&gt; A[,2]
  rows cols  a
1    4    2 42
&gt;</code></pre>
<p>Attributes can be selected similarly.</p>
</section>
<section id="datetime-attributes" class="level2">
<h2>Date(time) Attributes</h2>
<p>Similar to the dense array case described earlier, the file <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/ex_2.R">ex_2.R</a> illustrates some basic operations on sparse arrays. It also shows date and datetime types instead of just integer and double precision floats.</p>
<pre><code>&gt; A &lt;- tiledb_array(uri = uri, as.data.frame = TRUE)
&gt; A[1577858403:1577858408]
        rows cols a   b          d                       e
1 1577858403    1 3 103 2020-01-11 2020-01-02 18:24:33.844
2 1577858404    1 4 104 2020-01-15 2020-01-05 02:28:36.214
3 1577858405    1 5 105 2020-01-19 2020-01-05 00:44:04.805
4 1577858406    1 6 106 2020-01-21 2020-01-06 12:58:51.770
5 1577858407    1 7 107 2020-01-25 2020-01-09 04:29:56.309
6 1577858408    1 8 108 2020-01-26 2020-01-07 13:55:10.240
&gt;</code></pre>
<p>The row coordinate is currently a floating point representation of the underlying time type. We can both select attributes (here we excluded the ‚Äúa‚Äù column) and select rows by time (as the time stamps get converted to the required floating point value).</p>
<pre><code>&gt; attrs(A) &lt;- c(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;)
&gt; A[as.POSIXct(&quot;2020-01-01&quot;):as.POSIXct(&quot;2020-01-01 00:00:03&quot;)]
        rows cols   b          d                       e
1 1577858401    1 101 2020-01-05 2020-01-01 03:03:07.548
2 1577858402    1 102 2020-01-10 2020-01-02 21:02:19.747
3 1577858403    1 103 2020-01-11 2020-01-02 18:24:33.844
&gt;</code></pre>
<p>More extended examples are available showing indexing by date(time) as well as character dimension.</p>
</section>
</section>
<section id="additional-information" class="level1">
<h1>Additional Information</h1>
<p>The TileDB R package is documented via R help functions (<em>e.g.</em> <code>help(&quot;tiledb_array&quot;)</code> shows information for the <code>tiledb_array()</code> function) as well as via a <a href="https://tiledb-inc.github.io/TileDB-R/">website regrouping all documentation</a>. Extended <a href="https://tiledb-inc.github.io/TileDB-R/documentation.html">API documentation</a> is available, as is a <a href="https://github.com/TileDB-Inc/TileDB-R/tree/master/inst/examples">examples/</a> directory.</p>
<p>TileDB itself has extensive <a href="https://docs.tiledb.com/developer/installation">installation</a>, and <a href="https://docs.tiledb.com/developer/">overall documentation</a> as well as a <a href="https://forum.tiledb.com/">support forum</a>.</p>
</section>
</article>
</main>
</body>
</html>
